<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Listings</title>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="description" content="myHOME - real estate template project">

		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'styles/listings.css') }}">

		<!-- General links -->
		{% include 'include/headLinks.html' %}

		{{ map.js }}

	</head>

	<body>
		<div class="super_container">
			<div class="super_overlay"></div>

			<!-- Header -->

			{% include 'include/header.html' %}

			<!-- Title -->
			<center>
				<div class="title_container">
					<div class="title">Buscar Producto</div>
				</div>
			</center>


			<!-- Search -->
			<div class="search">
				<div class="container">
					<div class="col-12 p-0">
						<div class="google_map_container">
							{{ map.html }}
							<script type="text/javascript">
								google.maps.event.addDomListener(window, 'load', function(){
									{% for prod in prods %}    
									map_markers[{{ loop.index0 }}].addListener('click', function(){
										var elem = $("#{{ prod.id_producto }}");
										$(document).scrollTop(elem.offset().top - 80);
										elem.addClass('focus');
										setTimeout(function() {
											elem.removeClass('focus');
										}, 2000);
									});
									{% endfor %}
								});
							</script>
						</div>
					</div>

					<form action="#" class="search_form m_no_display" id="search_form">
						<div class="start justify-content-lg-between justify-content-start">
							<div class="row col search_inputs align-items-start justify-content-lg-between justify-content-start">
								<div class="col-lg-4">
									<div class="search_title">Precio Mínimo</div>
									{{ form.minprice(class = "search_input input-d", value = minprice) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Precio Máximo</div>
									{{ form.maxprice(class = "search_input", value = maxprice) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Fecha Mínima de Publicación</div>
									{{ form.minpublished(class = "search_input", value = minpublished) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Fecha Máxima de Publicación</div>
									{{ form.maxpublished(class = "search_input", value = maxpublished) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Categoría</div>
									{{ form.category(class = "search_input", value = category) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Palabras Clave</div>
									{{ form.keywords(class = "search_input", value = keywords) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Estado</div>
									{{ form.status(class = "", value = status) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Resultados por Página</div>
									{{ form.resultados(class = "search_input", value = resultados) }}
								</div>
								<div class="col-lg-4">
									<div class="search_title">Ordenación</div>
									{{ form.ordenacion(class = "search_input", value = ordenacion) }}
								</div>
						</div>
							{{ form.submit(class="search_button") }}
						</div>
					</form>
					<form action="#" class="search_form m_display d-lg-none d-xl-none" id="search_form">
						<div class="start justify-content-lg-between justify-content-start">
							<div class="col search_inputs align-items-start justify-content-lg-between justify-content-start">
								<div class="search_title">Precio Mínimo</div>
								{{ form.minprice(class = "search_input input-d", value = minprice) }}
								<div class="search_title">Precio Máximo</div>
								{{ form.maxprice(class = "search_input", value = maxprice) }}
								<div class="search_title">Fecha Mínima de Publicación</div>
								{{ form.minpublished(class = "search_input", value = minpublished) }}
								<div class="search_title">Fecha Máxima de Publicación</div>
								{{ form.maxpublished(class = "search_input", value = maxpublished) }}
								<div class="search_title">Palabras Clave</div>
								{{ form.keywords(class = "search_input", value = keywords) }}
								<div class="search_title">Categoría</div>
								{{ form.category(class = "search_input", value = category) }}
								<div class="search_title">Estado</div>
								{{ form.status(class = "", value = status) }}
								<div class="search_title">Resultados por Página</div>
								{{ form.resultados(class = "search_input", value = resultados) }}
								<div class="search_title">Ordenación</div>
								{{ form.ordenacion(class = "search_input", value = ordenacion) }}
							</div>
							{{ form.submit(class="search_button") }}
						</div>
					</form>

				</div>
			</div>
		</div>

		<!-- Listings -->

		<div class="listings">
			<div class="container">
				<div class="row">
					<div class="col">

						<!-- Sorting -->
						<div class="sorting d-flex flex-md-row flex-column align-items-start justify-content-start">

							<!-- Sort -->
							<div class="sorting_container">
								<div class="sort">
									<span>Sort By</span>
									<ul>
										<li class="sorting_button" data-isotope-option='{ "sortBy": "original-order" }'>
											Default
										</li>
										<li class="sorting_button" data-isotope-option='{ "sortBy": "price" }'>Price</li>
										<li class="sorting_button" data-isotope-option='{ "sortBy": "area" }'>Area</li>
									</ul>
								</div>
							</div>

						</div>


						{% import 'include/_products.html' as products %}
						{{ products.list(prods) }}

						<div class="row">
							<form action={{prev}} method="get">
								<input type="submit" class="search_button" value="Página Anterior" name="Submit" id="frm1_submit" />
							</form>

							<form action={{next}} method="get">
								<input type="submit" class="search_button" value="Página Siguiente" name="Submit" id="frm1_submit" />
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Footer  -->
		{% include 'include/footer.html' %}
		</div>

		<!-- General Scripts  -->
		{% include 'include/scripts.html' %}

		<!-- Isotope  -->
		<script src="{{ url_for('static', filename = 'plugins/Isotope/isotope.pkgd.min.js') }}"></script>

		<script src="{{ url_for('static', filename = 'js/listings.js') }}"></script>
	</body>
</html>
